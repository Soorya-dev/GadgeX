<%- include('../layoutUser/header.ejs') %>

<main class="main">
    <!-- Hero Section -->
    <div class="intro-section pt-3 pb-3 mb-2">
        <div class="container">
            <div class="tagline-container">
                <h1 class="tagline">GadgeX: Innovation You Can Afford.</h1>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-8">
                    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="3000">
                        <ol class="carousel-indicators">
                            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100" src="/userCss/images/banners/custom/phones2.jpg" alt="First slide">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="/userCss/images/banners/custom/watches2.webp" alt="Second slide">
                            </div>
                            <div class="carousel-item">
                                <img class="d-block w-100" src="/userCss/images/banners/custom/laptops.jpg" alt="Third slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="intro-banners">
                        <div class="banner mb-lg-1 mb-xl-2">
                            <a href="/singleProduct/<%= newArrivals[0]._id %>">
                                <div class="banner-image-container">
                                    <img src="/<%= newArrivals[0].image[0] %>" alt="<%= newArrivals[0].name %>">
                                </div>
                            </a>
                            <div class="banner-content">
                                <h4 class="banner-subtitle d-lg-none d-xl-block"><a href="#">Top Product</a></h4>
                                <h3 class="banner-title"><a href="/singleProduct/<%= newArrivals[0]._id %>"><%= newArrivals[0].name %></a></h3>
                                <a href="/singleProduct/<%= newArrivals[0]._id %>" class="btn btn-outline-primary banner-link">Shop Now<i class="icon-long-arrow-right"></i></a>
                            </div>
                        </div>
                        <div class="banner mb-lg-1 mb-xl-2">
                            <a href="/singleProduct/<%= newArrivals[1]._id %>">
                                <div class="banner-image-container">
                                    <img src="/<%= newArrivals[1].image[0] %>" alt="<%= newArrivals[1].name %>">
                                </div>
                            </a>
                            <div class="banner-content">
                                <h4 class="banner-subtitle d-lg-none d-xl-block"><a href="#">Newly Arrived</a></h4>
                                <h3 class="banner-title"><a href="/singleProduct/<%= newArrivals[1]._id %>"><%= newArrivals[1].name %></a></h3>
                                <a href="/singleProduct/<%= newArrivals[1]._id %>" class="btn btn-outline-primary banner-link">Shop Now<i class="icon-long-arrow-right"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
        











            </div>
        </div>
    </div>

    <!-- Category Section -->
    <div class="container">
        <h2 class="title text-center mb-4">Explore Popular Categories</h2>
        <div class="row">
            <% categories.forEach(category => { %>
                <div class="col-6 col-md-4 col-lg-4">
                    <div class="icon-box icon-box-side">
                        <span class="icon-box-icon text-dark">
                            <i class="<%= category.icon %>"></i>
                        </span>
                        <div class="icon-box-content">
                            <h3 class="icon-box-title"><%= category.name %></h3>
                            <p><%= category.count %> Products</p>
                        </div>
                    </div>
                </div>
            <% }); %>
        </div>
    </div>

    <!-- Featured Products Section -->
    <div class="container">
        <h2 class="title text-center mb-4">Featured Products</h2>
        <div class="products">
            <div class="row justify-content-center">
                <% featuredProducts.forEach(product => { %>
                    <div class="col-6 col-md-4 col-lg-3">
                        <div class="product product-7 text-center">
                            <figure class="product-media">
                                <% if (product.offerApplied) { %>
                                    <span class="product-label label-sale">Sale</span>
                                <% } %>
                                <a href="/singleProduct/<%= product._id %>">
                                    <img src="/<%= product.image[0] %>" alt="<%= product.name %>" class="product-image">
                                </a>
                                <div class="product-action-vertical">
                                    <a href="#" class="btn-product-icon btn-wishlist btn-expandable" onclick="addToWishlist(event, '<%= product._id %>', '<%= product.category._id %>')"><span>add to wishlist</span></a>
                                </div>
                                <div class="product-action">
                                    <a href="#" class="btn-product btn-cart" onclick="addToCart(event, '<%= product._id %>')"><span>add to cart</span></a>
                                </div>
                            </figure>
                            <div class="product-body">
                                <div class="product-cat">
                                    <a href="#"><%= product.category.name %></a>
                                </div>
                                <h3 class="product-title"><a href="/singleProduct/<%= product._id %>"><%= product.name %></a></h3>
                                <div class="product-price">
                                    <% if (product.offerApplied) { %>
                                        <span class="new-price">$<%= product.offerDetails.priceAfterOfferApplied %></span>
                                        <span class="old-price">Was $<%= product.price %></span>
                                    <% } else { %>
                                        $<%= product.price %>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>
<!-- Hot Deals Section -->
<div class="container">
    <div class="row">
        <div class="col-lg-9">
            <div class="heading heading-flex mb-3">
                <div class="heading-left">
                    <h2 class="title">Hot Deals</h2>
                </div>
                <div class="heading-right">
                    <a href="/shop" class="see-all-link">See All Deals<i class="icon-long-arrow-right"></i></a>
                </div>
            </div>
            <div class="products">
                <div class="row">
                    <% hotDeals.forEach(product => { %>
                        <div class="col-6 col-md-4">
                            <div class="product product-7 text-center">
                                <figure class="product-media">
                                    <% if (product.offerApplied) { %>
                                        <span class="product-label label-sale">Sale</span>
                                    <% } %>
                                    <a href="/singleProduct/<%= product._id %>">
                                        <img src="/<%= product.image[0] %>" alt="<%= product.name %>" class="product-image">
                                    </a>
                                    <div class="product-action-vertical">
                                        <a href="#" class="btn-product-icon btn-wishlist btn-expandable"><span>add to wishlist</span></a>
                                    </div>
                                    <div class="product-action">
                                        <a href="#" class="btn-product btn-cart" onclick="addToCart(event, '<%= product._id %>')"><span>add to cart</span></a>
                                    </div>
                                </figure>
                                <div class="product-body">
                                    <div class="product-cat">
                                        <a href="#"><%= product.category.name %></a>
                                    </div>
                                    <h3 class="product-title"><a href="/singleProduct/<%= product._id %>"><%= product.name %></a></h3>
                                    <div class="product-price">
                                        <% if (product.offerApplied) { %>
                                            <span class="new-price">$<%= product.offerDetails.priceAfterOfferApplied %></span>
                                            <span class="old-price">Was $<%= product.price %></span>
                                        <% } else { %>
                                            $<%= product.price %>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div class="banner banner-overlay">
                <a href="#">
                   
                </a>
                <div class="banner-content banner-content-top">
                    <h4 class="banner-subtitle text-white">The Best Choice</h4>
                    <h3 class="banner-title text-white">Clearance <br>Top Products</h3>
                    <div class="banner-text text-white">from $39.99</div>
                    <a href="/shop" class="btn btn-outline-white banner-link">Shop Now<i class="icon-long-arrow-right"></i></a>
                </div>
            </div>
        </div>
    </div>
</div>
    <!-- Deal of the Day Section -->
    <% if (dealOfTheDay) { %>
        <div class="bg-light deal-container pt-7 pb-7 mb-5">
            <div class="container">
                <div class="heading text-center mb-4">
                    <h2 class="title">Deal of the Day</h2>
                    <p class="title-desc">Limited quantities. Don't miss out!</p>
                </div>
                <div class="row">
                    <div class="col-lg-6 deal-content">
                        <h4>Limited Time Offer</h4>
                        <h2 class="product-title"><a href="/singleProduct/<%= dealOfTheDay._id %>"><%= dealOfTheDay.name %></a></h2>
                        <div class="product-price">
                            <% if (dealOfTheDay.offerApplied) { %>
                                <span class="new-price">$<%= dealOfTheDay.offerDetails.priceAfterOfferApplied %></span>
                                <span class="old-price">Was $<%= dealOfTheDay.price %></span>
                            <% } else { %>
                                <span class="new-price">$<%= dealOfTheDay.price %></span>
                            <% } %>
                        </div>
                        <a href="/singleProduct/<%= dealOfTheDay._id %>" class="btn btn-primary">
                            <span>Shop Now</span><i class="icon-long-arrow-right"></i>
                        </a>
                    </div>
                    <div class="col-lg-6 deal-image">
                        <img src="/<%= dealOfTheDay.image[0] %>" alt="<%= dealOfTheDay.name %>">
                        <div class="deal-countdown is-countdown" data-until="+10h"></div>
                    </div>
                </div>
            </div>
        </div>
    <% } %>

    <!-- Top Selling Products Section -->
    <div class="container">
        <h2 class="title text-center mb-4">Top Selling Products</h2>
        <div class="products">
            <div class="row justify-content-center">
                <% topSellingProducts.forEach(product => { %>
                    <div class="col-6 col-md-4 col-lg-3">
                        <div class="product product-7 text-center">
                            <figure class="product-media">
                                <% if (product.offerApplied) { %>
                                    <span class="product-label label-sale">Sale</span>
                                <% } %>
                                <a href="/singleProduct/<%= product._id %>">
                                    <img src="/<%= product.image[0] %>" alt="<%= product.name %>" class="product-image">
                                </a>
                                <div class="product-action-vertical">
                                    <a href="#" class="btn-product-icon btn-wishlist btn-expandable" onclick="addToWishlist(event, '<%= product._id %>', '<%= product.category._id %>')"><span>add to wishlist</span></a>
                                </div>
                                <div class="product-action">
                                    <a href="#" class="btn-product btn-cart" onclick="addToCart(event, '<%= product._id %>')"><span>add to cart</span></a>
                                </div>
                            </figure>
                            <div class="product-body">
                                <div class="product-cat">
                                    <a href="#"><%= product.category.name %></a>
                                </div>
                                <h3 class="product-title"><a href="/singleProduct/<%= product._id %>"><%= product.name %></a></h3>
                                <div class="product-price">
                                    <% if (product.offerApplied) { %>
                                        <span class="new-price">$<%= product.offerDetails.priceAfterOfferApplied %></span>
                                        <span class="old-price">Was $<%= product.price %></span>
                                    <% } else { %>
                                        $<%= product.price %>
                                    <% } %>
                                </div>
                                <div class="ratings-container">
                                    <div class="ratings">
                                        <div class="ratings-val" style="width: 80%;"></div>
                                    </div>
                                    <span class="ratings-text">( <%= product.totalQuantity %> Sold )</span>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>

    <!-- New Arrivals Section -->
    <div class="container">
        <h2 class="title text-center mb-4">New Arrivals</h2>
        <div class="products">
            <div class="row justify-content-center">
                <% newArrivals.forEach(product => { %>
                    <div class="col-6 col-md-4 col-lg-3">
                        <div class="product product-7 text-center">
                            <figure class="product-media">
                                <% if (product.offerApplied) { %>
                                    <span class="product-label label-sale">Sale</span>
                                <% } %>
                                <span class="product-label label-new">New</span>
                                <a href="/singleProduct/<%= product._id %>">
                                    <img src="/<%= product.image[0] %>" alt="<%= product.name %>" class="product-image">
                                </a>
                                <div class="product-action-vertical">
                                    <a href="#" class="btn-product-icon btn-wishlist btn-expandable" onclick="addToWishlist(event, '<%= product._id %>', '<%= product.category._id %>')"><span>add to wishlist</span></a>
                                </div>
                                <div class="product-action">
                                    <a href="#" class="btn-product btn-cart" onclick="addToCart(event, '<%= product._id %>')"><span>add to cart</span></a>
                                </div>
                            </figure>
                            <div class="product-body">
                                <div class="product-cat">
                                    <a href="#"><%= product.category.name %></a>
                                </div>
                                <h3 class="product-title"><a href="/singleProduct/<%= product._id %>"><%= product.name %></a></h3>
                                <div class="product-price">
                                    <% if (product.offerApplied) { %>
                                        <span class="new-price">$<%= product.offerDetails.priceAfterOfferApplied %></span>
                                        <span class="old-price">Was $<%= product.price %></span>
                                    <% } else { %>
                                        $<%= product.price %>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="cta cta-separator cta-border-image cta-half mb-0" style="background-image: url(/userCss/images/demos/demo-3/bg-2.jpg);">
            <div class="cta-border-wrapper bg-white">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="cta-wrapper text-center">
                            <h3 class="cta-title">Why Choose Us</h3>
                            <div class="cta-desc">
                                <ul class="list-unstyled">
                                    <li><i class="icon-check"></i> Wide Range of Latest Gadgets</li>
                                    <li><i class="icon-check"></i> Competitive Prices</li>
                                    <li><i class="icon-check"></i> Expert Customer Support</li>
                                    <li><i class="icon-check"></i> Fast and Reliable Shipping</li>
                                </ul>
                            </div>
                        </div>
                    </div>
    
                    <div class="col-lg-6">
                        <div class="cta-wrapper text-center">
                            <h3 class="cta-title">Our Commitment</h3>
                            <p class="cta-desc">
                                At GadgeX, we're committed to bringing you the latest and greatest in tech innovation. Our passion for technology drives us to curate the best gadgets from around the world, ensuring you always stay ahead of the curve.
                            </p>
                            <p class="cta-desc">
                                <strong>Quality. Innovation. Service.</strong><br>
                                That's the GadgeX promise.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
                <style>
                    
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

.cta {
    background-size: cover;
    background-position: center;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
}

.cta-border-wrapper {
    background-color: rgba(255, 255, 255, 0.9);
    border-radius: 15px;
    padding: 40px;
    margin: 20px;
}

.cta-title {
    font-size: 2.5rem;
    color: #333;
    margin-bottom: 20px;
    font-weight: 700;
    text-transform: uppercase;
}

.cta-desc {
    font-size: 1.1rem;
    color: #555;
    line-height: 1.6;
}

.list-unstyled {
    list-style-type: none;
    padding-left: 0;
}

.list-unstyled li {
    margin-bottom: 15px;
    display: flex;
    align-items: center;
}

.icon-check {
    color: #4CAF50;
    margin-right: 10px;
    font-size: 1.2rem;
}

.cta-wrapper {
    padding: 20px;
    transition: transform 0.3s ease;
}

.cta-wrapper:hover {
    transform: translateY(-5px);
}

@media (max-width: 992px) {
    .cta-border-wrapper {
        margin: 10px;
        padding: 20px;
    }
    
    .cta-title {
        font-size: 2rem;
    }
    
    .cta-desc {
        font-size: 1rem;
    }
}

@media (max-width: 768px) {
    .col-lg-6 {
        margin-bottom: 30px;
    }
}

                </style>
               <style>
    .tagline-container {
        background: linear-gradient(45deg, #1a1a2e, #16213e);
        padding: 20px;
        margin-bottom: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        position: relative;
        overflow: hidden;
    }

    .tagline-container::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
            to bottom right,
            rgba(255, 255, 255, 0) 0%,
            rgba(255, 255, 255, 0.1) 50%,
            rgba(255, 255, 255, 0) 100%
        );
        animation: shine 3s infinite;
    }

    .tagline {
        color: #e94560;
        font-size: 2.5rem;
        font-weight: 700;
        text-transform: uppercase;
        margin: 0;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        animation: glitch 5s infinite;
    }

    @keyframes shine {
        0% {
            top: -50%;
            left: -50%;
        }
        100% {
            top: 50%;
            left: 50%;
        }
    }

    @keyframes glitch {
        0% {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
        25% {
            text-shadow: -2px -2px 0 #00fff2, 2px 2px 0 #ff00de;
        }
        50% {
            text-shadow: 2px -2px 0 #00fff2, -2px 2px 0 #ff00de;
        }
        75% {
            text-shadow: -2px 2px 0 #00fff2, 2px -2px 0 #ff00de;
        }
        76% {
            text-shadow: none;
        }
        100% {
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }
    }

    /* Banner Styles */
    .intro-banners .banner {
        position: relative;
        overflow: hidden;
        border-radius: 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        margin-bottom: 20px;
    }

    .banner-image-container {
        width: 100%;
        height: 200px;
        overflow: hidden;
    }

    .banner-image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .banner:hover .banner-image-container img {
        transform: scale(1.1);
    }

    .banner-content {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 20px;
        background: rgba(26, 26, 46, 0.8);
        transition: background 0.3s ease;
    }

    .banner:hover .banner-content {
        background: rgba(26, 26, 46, 0.95);
    }

    .banner-subtitle {
        font-size: 0.9rem;
        color: #00fff2;
        margin-bottom: 5px;
    }

    .banner-title {
        font-size: 1.2rem;
        color: #e94560;
        margin-bottom: 10px;
    }

    .banner-link {
        font-size: 0.9rem;
        text-transform: uppercase;
        font-weight: 600;
        color: #fff;
    }

    @media (max-width: 992px) {
        .tagline {
            font-size: 2rem;
        }
    }

    @media (max-width: 768px) {
        .tagline {
            font-size: 1.5rem;
        }
    }
</style>
    </main><!-- End .main -->
    <script>
        function addToWishlist(event, productId, categoryId) {
            event.preventDefault();
        
            fetch('/addWishlist', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ productId, categoryId })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        title: 'Success!',
                        text: 'Product added to wishlist.',
                        icon: 'success',
                        confirmButtonText: 'OK'
                    });
                } else if (data.error === 'Product already in wishlist') {
                    Swal.fire({
                        title: 'Info',
                        text: 'Product is already in your wishlist.',
                        icon: 'info',
                        confirmButtonText: 'OK'
                    });
                } else {
                    Swal.fire({
                        title: 'Error',
                        text: data.error || 'Failed to add product to wishlist.',
                        icon: 'error',
                        confirmButtonText: 'OK'
                    });
                }
            })
            .catch(error => {
                Swal.fire({
                    title: 'Error',
                    text: 'An unexpected error occurred.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
                console.error('Error:', error);
            });
        }
        
        function addToCart(event, productId) {
    event.preventDefault();
    
    const quantity = 1; // Default quantity

    fetch('/cart', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ productId, quantity })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            Swal.fire({
                title: 'Success!',
                text: 'Product added to cart.',
                icon: 'success',
                confirmButtonText: 'OK'
            });
        } else {
            Swal.fire({
                title: 'Error',
                text: data.message || 'Failed to add product to cart.',
                icon: 'error',
                confirmButtonText: 'OK'
            });
        }
    })
    .catch(error => {
        Swal.fire({
            title: 'Error',
            text: 'An unexpected error occurred.',
            icon: 'error',
            confirmButtonText: 'OK'
        });
        console.error('Error:', error);
    });
}

        </script>
    <%-include('../layoutUser/footer.ejs')%>